# Задача о сортировке в лабиринте
## Описание задачи
В подземном комплексе находится система коридоров и комнат специальной структуры. В этой системе необходимо организовать перемещение объектов четырех типов (A, B, C, D) таким образом, чтобы каждый тип оказался в своей целевой комнате с минимальными энергозатратами.

## Структура лабиринта
Лабиринт представляет собой граф следующего вида:

```
#############
#...........#
###.#.#.#.###
  #.#.#.#.#
  #########
```

Коридор: горизонтальный проход длиной 11 позиций (индексы от 0 до 10).

```
#############
#01234567890#
###.#.#.#.###
  #.#.#.#.#
  #########
```

Комнаты: 4 вертикальных помещения, каждое глубиной 2 или 4 позиции (в зависимости от задачи).

```
#############
#..2.4.6.8..#
###A#B#C#D###
  #A#B#C#D#
  #########
  
#############
#..2.4.6.8..#
###A#B#C#D###
  #A#B#C#D#
  #A#B#C#D#
  #A#B#C#D#
  #########
```

Соединения: комнаты подключены к коридору в позициях 2, 4, 6 и 8:

Комната 0 (позиция 2) — целевая для объектов типа A
Комната 1 (позиция 4) — целевая для объектов типа B
Комната 2 (позиция 6) — целевая для объектов типа C
Комната 3 (позиция 8) — целевая для объектов типа D
Объекты и стоимость перемещения
В лабиринте находятся объекты четырех типов: A, B, C, D.

Каждый тип имеет свою стоимость перемещения на один шаг:

Тип A: 1 единица энергии
Тип B: 10 единиц энергии
Тип C: 100 единиц энергии
Тип D: 1000 единиц энергии
### Правила перемещения
1. Запретные позиции остановки

Объекты не могут останавливаться в позициях коридора 2, 4, 6, 8 (непосредственно над входами в комнаты). Эти позиции можно только проходить транзитом.

2. Правило входа в комнату

Объект типа X может войти в комнату Y только при выполнении двух условий: - Y является целевой комнатой для типа X - В комнате Y отсутствуют объекты других типов

3. Правило блокировки

Если объект остановился в коридоре на разрешенной позиции, он не может перемещаться до тех пор, пока не освободится путь для полного перемещения в целевую комнату.

4. Правило заполнения комнаты

При входе в комнату объект перемещается на максимальную доступную глубину. Комната заполняется от дальней позиции к ближней.

### Вариант 1. Комнаты глубиной 2
Условие
В лабиринте находятся 8 объектов (по 2 объекта каждого типа). Каждая комната имеет глубину 2 позиции.

Входные данные
Начальная конфигурация задается диаграммой вида:

```
#############
#...........#
###B#C#B#D###
  #A#D#C#A#
  #########
```

Где:

```#``` — стены
. — свободное пространство в коридоре
Буквы (A, B, C, D) — объекты соответствующих типов
Формат:

Строка 1: ############# (13 символов)
Строка 2: #...........# (коридор, 11 точек между стенами)
Строка 3: ###X#X#X#X### (верхний уровень комнат, X — тип объекта)
Строка 4: __#X#X#X#X# (нижний уровень комнат, начинается с 2 пробелов)
Строка 5: __######### (дно комнат)
Выходные данные
Одно целое число — минимальная суммарная энергия, необходимая для достижения целевой конфигурации.

## Пример
Входные данные:

```
#############
#...........#
###B#C#B#D###
  #A#D#C#A#
  #########
```

Выходные данные:

12521
Целевая конфигурация

```
#############
#...........#
###A#B#C#D###
  #A#B#C#D#
  #########
```

## Пример решения
Начальное состояние:

```
#############
#...........#
###B#C#B#D###
  #A#D#C#A#
  #########
```

Энергия: 0

Шаг 1: B из комнаты 2 → коридор позиция 3 (4 шага × 10 = 40)

```
#############
#...B.......#
###B#C#.#D###
  #A#D#C#A#
  #########
```
  
Энергия: 40

Шаг 2: C из комнаты 1 → комната 2 (4 шага × 100 = 400)

```
#############
#...B.......#
###B#.#C#D###
  #A#D#C#A#
  #########
```

Энергия: 440

Шаг 3: D из комнаты 1 → коридор позиция 5 (3 шага × 1000 = 3000)

```
#############
#...B.D.....#
###B#.#C#D###
  #A#.#C#A#
  #########
```

Энергия: 3440

Шаг 4: B из коридора позиция 3 → комната 1 глубина 2 (3 шага × 10 = 30)

```
#############
#.....D.....#
###B#.#C#D###
  #A#B#C#A#
  #########
```

Энергия: 3470

Шаг 5: B из комнаты 0 → комната 1 глубина 1 (4 шага × 10 = 40)

```
#############
#.....D.....#
###.#B#C#D###
  #A#B#C#A#
  #########
```

Энергия: 3510

Шаг 6: D из комнаты 3 глубина 1 → коридор позиция 7 (2 шага × 1000 = 2000)

```
#############
#.....D.D...#
###.#B#C#.###
  #A#B#C#A#
  #########
```

Энергия: 5510

Шаг 7: A из комнаты 3 глубина 2 → коридор позиция 9 (3 шага × 1 = 3)

```
#############
#.....D.D.A.#
###.#B#C#.###
  #A#B#C#.#
  #########
```

Энергия: 5513

Шаг 8: D из коридора позиция 7 → комната 3 глубина 2 (3 шага × 1000 = 3000)

```
#############
#.....D...A.#
###.#B#C#.###
  #A#B#C#D#
  #########
```

Энергия: 8513

Шаг 9: D из коридора позиция 5 → комната 3 глубина 1 (4 шага × 1000 = 4000)

```
#############
#.........A.#
###.#B#C#D###
  #A#B#C#D#
  #########
```

Энергия: 12513

Шаг 10: A из коридора позиция 9 → комната 0 глубина 1 (8 шагов × 1 = 8)

```
#############
#...........#
###A#B#C#D###
  #A#B#C#D#
  #########
```

Итоговая энергия: 12521

### Вариант 2. Комнаты глубиной 4
Условие
В лабиринте находятся 16 объектов (по 4 объекта каждого типа). Каждая комната имеет глубину 4 позиции.

Входные данные
Начальная конфигурация задается диаграммой вида:

```
#############
#...........#
###B#C#B#D###
  #D#C#B#A#
  #D#B#A#C#
  #A#D#C#A#
  #########
```

Выходные данные
Одно целое число — минимальная суммарная энергия, необходимая для достижения целевой конфигурации.

## Пример
Входные данные:

```
#############
#...........#
###B#C#B#D###
  #D#C#B#A#
  #D#B#A#C#
  #A#D#C#A#
  #########
```

Выходные данные:

44169
Целевая конфигурация

```
#############
#...........#
###A#B#C#D###
  #A#B#C#D#
  #A#B#C#D#
  #A#B#C#D#
  #########
```

## Технические характеристики решения
Оценочные параметры производительности:

Потребление памяти: ≈ 200 МБ
Время выполнения: ≈ 10 секунды
